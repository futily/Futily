<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="description"
          content="{% block meta_description %}{{ get_meta_description() }}{% endblock %}">
    <meta name="robots" content="{% block meta_robots %}{{ get_meta_robots() }}{% endblock %}">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1">

    {# TODO: Change this value #}
    <meta name="theme-color" content="#db5945">

    <link rel="preload" href="{{ static('build/css/app.css') }}" as="style">

    <link rel="prefetch" href="{{ static('build/css/app.css') }}">

    {% block canonical %}
      <link rel="canonical" href="{{ get_canonical_url() }}" />
    {% endblock %}

    {% if page_obj and page_obj.has_other_pages() %}
      {% if page_obj.has_previous() %}
        <link rel="previous" href="{{ get_pagination_url(page_obj.previous_page_number()) }}">
      {% endif %}

      {% if page_obj.has_next() %}
        <link rel="next" href="{{ get_pagination_url(page_obj.next_page_number()) }}">
      {% endif %}
    {% endif %}

    <!-- Open Graph data -->
    <meta property="og:title" content="{% block og_title %}{{ get_og_title() }}{% endblock %}">
    <meta property="og:url" content="{{ get_canonical_url() }}">
    <meta property="og:type" content="website">
    <meta property="og:description"
          content="{% block og_description %}{{ get_og_description() }}{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{{ get_og_image() }}{% endblock %}">

    <!-- Twitter card data -->
    <meta name="twitter:card"
          content="{% block twitter_card %}{{ get_twitter_card() }}{% endblock %}" />
    <meta name="twitter:site" content="" />
    <meta name="twitter:title"
          content="{% block twitter_title %}{{ get_twitter_title() }}{% endblock %}" />
    <meta name="twitter:description"
          content="{% block twitter_description %}{{ get_twitter_description() }}{% endblock %}" />
    <meta name="twitter:image"
          content="{% block twitter_image %}{{ get_twitter_image() }}{% endblock %}" />

    <title>{% block title %}{{ render_title() }}{% endblock %}</title>

    <!-- Favicons -->
    {% include "base/_favicons.html" %}

    {% block feeds %}{% endblock %}

    {# Project #}
    {% if settings.TYPEKIT_USED %}
      {% include "base/_typekit.html" %}
    {% endif %}

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i" rel="stylesheet">

    {% compress css %}
      <link rel="stylesheet" href="{{ static('build/css/app.css') }}">
    {% endcompress %}

    {% block css %}{% endblock %}

    {% include "base/_analytics.html" %}
  </head>

  <body class="util-Preload {% block body_class %}{% endblock %}">
    {% include "base/_browser-update.html" %}

    {% block site %}
      <div class="lyt-Site" id="app">
        {% include "base/_header.html" %}

        {% block content_outer %}
          {% block content_above %}{% endblock %}

          {% block content %}
            <div class="lyt-Content {% block content_class %}lyt-Content-mainAside{% endblock %}">
              {% block content_inner %}
                <div class="lyt-Content_Inner">
                  <div class="lyt-Content_Body">
                    <main class="lyt-Main {% block main_class %}{% endblock %}">
                      {% block main %}{% endblock %}
                    </main>

                    {% if self.aside() %}
                      <aside class="lyt-Aside">
                        {% block aside %}{% endblock %}
                      </aside>
                    {% endif %}
                  </div>
                </div>
              {% endblock %}
            </div>
          {% endblock %}

          {% block content_below %}{% endblock %}
        {% endblock %}

        <div class="pg-BottomBanner">
          <div class="pg-BottomBanner_Inner">
            <div class="pg-BottomBanner_Body">
              <img class="pg-BottomBanner_Image" src="http://placehold.it/728x90">
            </div>
          </div>
        </div>

        {% include "base/_footer.html" %}
      </div>
    {% endblock %}

    <template id="PlayerSearchResult">
      <li class="plyr-SearchResults_Result" tabindex="-1">
        <a class="plyr-SearchResult" tabindex="-1">
          <img class="plyr-SearchResult_Nation">
          <img class="plyr-SearchResult_Club">
          <p class="plyr-SearchResult_Name"></p>
          <span class="plyr-SearchResult_Position"></span>
          <img class="plyr-SearchResult_Player">

          <span class="plyr-SearchResult_Rating"></span>
          <span class="plyr-SearchResult_RatingIcon"></span>
        </a>
      </li>
    </template>

    <template id="NationSearchResult">
      <li class="plyr-SearchResults_Result" tabindex="-1">
        <a class="plyr-SearchResult" tabindex="-1">
          <img class="plyr-SearchResult_Nation">
          <p class="plyr-SearchResult_Name"></p>
        </a>
      </li>
    </template>

    <template id="ClubSearchResult">
      <li class="plyr-SearchResults_Result" tabindex="-1">
        <a class="plyr-SearchResult" tabindex="-1">
          <img class="plyr-SearchResult_Club">
          <p class="plyr-SearchResult_Name"></p>
        </a>
      </li>
    </template>

    {{ render_bundle('vendor', 'js') }}
    {{ render_bundle('app', 'js') }}

    {% compress js %}
      {% block compressed_js_first %}{% endblock %}

      {% block compressed_js_last %}{% endblock %}
    {% endcompress %}

    {# Opbeat JS error tracking #}
    {% if settings.OPBEAT %}
      <script src="https://d3tvtfb6518e3e.cloudfront.net/3/opbeat.min.js"
              async
              defer
              data-org-id="{{ settings.OPBEAT.ORGANIZATION_ID }}"
              data-app-id="{{ settings.OPBEAT.APP_ID }}">
      </script>

      {% if user.is_authenticated() %}
        <script>
          _opbeat('setUserContext', {
            id: "{{ user.pk }}"
          });
        </script>
      {% endif %}
    {% endif %}
  </body>
</html>
